<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>A/B Testing Final Project | Nancy's Notebook</title><meta name=keywords content="ab-testing"><meta name=description content="Implementation of Udacity A/B Testing course final project."><meta name=author content="Me"><link rel=canonical href=https://nancyyanyu.github.io/posts/ab_testing_final_project/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U+6hYRq/Ez/nm5vg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://nancyyanyu.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://nancyyanyu.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://nancyyanyu.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://nancyyanyu.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://nancyyanyu.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="A/B Testing Final Project"><meta property="og:description" content="Implementation of Udacity A/B Testing course final project."><meta property="og:type" content="article"><meta property="og:url" content="https://nancyyanyu.github.io/posts/ab_testing_final_project/"><meta property="og:image" content="https://nancyyanyu.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-07-03T14:28:54+00:00"><meta property="article:modified_time" content="2020-07-03T14:28:54+00:00"><meta property="og:site_name" content="ExampleSite"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://nancyyanyu.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="A/B Testing Final Project"><meta name=twitter:description content="Implementation of Udacity A/B Testing course final project."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://nancyyanyu.github.io/posts/"},{"@type":"ListItem","position":2,"name":"A/B Testing Final Project","item":"https://nancyyanyu.github.io/posts/ab_testing_final_project/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"A/B Testing Final Project","name":"A\/B Testing Final Project","description":"Implementation of Udacity A/B Testing course final project.\n","keywords":["ab-testing"],"articleBody":"Implementation of Udacity A/B Testing course final project.\nExperiment Overview: Free Trial Screener At the time of this experiment, Udacity courses currently have two options on the course overview page: “start free trial”, and “access course materials”. If the student clicks “start free trial”, they will be asked to enter their credit card information, and then they will be enrolled in a free trial for the paid version of the course. After 14 days, they will automatically be charged unless they cancel first. If the student clicks “access course materials”, they will be able to view the videos and take the quizzes for free, but they will not receive coaching support or a verified certificate, and they will not submit their final project for feedback.\nIn the experiment, Udacity tested a change where if the student clicked “start free trial”, they were asked how much time they had available to devote to the course. If the student indicated 5 or more hours per week, they would be taken through the checkout process as usual. If they indicated fewer than 5 hours per week, a message would appear indicating that Udacity courses usually require a greater time commitment for successful completion, and suggesting that the student might like to access the course materials for free. At this point, the student would have the option to continue enrolling in the free trial, or access the course materials for free instead. This screenshot shows what the experiment looks like.\nThe hypothesis was that this might set clearer expectations for students upfront, thus reducing the number of frustrated students who left the free trial because they didn’t have enough time—without significantly reducing the number of students to continue past the free trial and eventually complete the course. If this hypothesis held true, Udacity could improve the overall student experience and improve coaches’ capacity to support students who are likely to complete the course.\nThe unit of diversion is a cookie, although if the student enrolls in the free trial, they are tracked by user-id from that point forward. The same user-id cannot enroll in the free trial twice. For users that do not enroll, their user-id is not tracked in the experiment, even if they were signed in when they visited the course overview page.\nMetric Choice Which of the following metrics would you choose to measure for this experiment and why? For each metric you choose, indicate whether you would use it as an invariant metric or an evaluation metric. The practical significance boundary for each metric, that is, the difference that would have to be observed before that was a meaningful change for the business, is given in parentheses. All practical significance boundaries are given as absolute changes.\nAny place “unique cookies” are mentioned, the uniqueness is determined by day. (That is, the same cookie visiting on different days would be counted twice.) User-ids are automatically unique since the site does not allow the same user-id to enroll twice.\nNumber of cookies: That is, number of unique cookies to view the course overview page. ($d_{min}=3000$) Number of user-ids: That is, number of users who enroll in the free trial. ($d_{min}=50$) Number of clicks: That is, number of unique cookies to click the “Start free trial” button (which happens before the free trial screener is trigger). ($d_{min}=240$) Click-through-probability: That is, number of unique cookies to click the “Start free trial” button divided by number of unique cookies to view the course overview page. ($d_{min}=0.01$) Gross conversion: That is, number of user-ids to complete checkout and enroll in the free trial divided by number of unique cookies to click the “Start free trial” button. ($d_{min}=0.01$) Retention: That is, number of user-ids to remain enrolled past the 14-day boundary (and thus make at least one payment) divided by number of user-ids to complete checkout. ($d_{min}=0.01$) Net conversion: That is, number of user-ids to remain enrolled past the 14-day boundary (and thus make at least one payment) divided by the number of unique cookies to click the “Start free trial” button. ($d_{min}=0.0075$) You should also decide now what results you will be looking for in order to launch the experiment. Would a change in any one of your evaluation metrics be sufficient? Would you want to see multiple metrics all move or not move at the same time in order to launch? This decision will inform your choices while designing the experiment.\nInvariant Metrics : number of cookies, number of clicks, click-through-probability.\nEvaluation Metrics : gross conversion, retention, net conversion.\nMeasure Variability import math n_pageviews=40000 n_clicks=3200 n_enroll=660 ctp=0.08 n_sample=5000 click_through_probability=0.08 #clicks / pageviews gross_conversion=0.20625 # enroll / click retention=0.53 # payment / enroll net_conversion=0.1093125 # payment / click \"\"\"analytic standard deviation estimate\"\"\" # gross_conversion std_gross_conversion=math.sqrt(gross_conversion*(1-gross_conversion)/(n_clicks/n_pageviews*n_sample)) # retention std_retention=math.sqrt(retention*(1-retention)/(n_enroll/n_pageviews*n_sample)) # net_conversion std_net_conversion=math.sqrt(net_conversion*(1-net_conversion)/(n_clicks/n_pageviews*n_sample)) print(\"SD of GC: \",round(std_gross_conversion,4)) print(\"SD of Retention: \",round(std_retention,4)) print(\"SD of NC: \",round(std_net_conversion,4)) SD of GC: 0.0202 SD of Retention: 0.0549 SD of NC: 0.0156 Sizing Will you use Bonferroni Correction? Evaluation metrics are closely related to each other, so that Bonferroni would be too conservative.\nWhich evaluation metrics did you choose? gross conversion, retention, net conversion\nHow many pageviews will you need? Using sample size calculator https://www.evanmiller.org/ab-testing/sample-size.html\ngross conversion\nBaseline rate: 20.625% Minimum Detectable Effect: 0.01 Sample size: 25,835 clicks/group Total sample size: 25,835*2=51670 clicks Pageviews= 51670 / 0.08 (clicks / pageviews)=645875 retention\nBaseline rate: 53% Minimum Detectable Effect: 0.01 Sample size: 39,115 enrolls/group Total sample size: 39,115*2=78230 enrolls Pageviews= 78230 / (660/40000) (enrolls / pageviews)=4741212 net conversion\nBaseline rate: 10.93125% Minimum Detectable Effect: 0.0075 Sample size: 27,413 clicks/group Total sample size: 27,413*2=54826 clicks Pageviews= 54826 / 0.08 (clicks / pageviews)=685325 The maximum number of pageviews is 4741212\nUsing Standard Error from scipy.stats import norm # Inputs: # The desired alpha for a two-tailed test # Returns: The z-critical value def get_z_star(alpha): return norm.ppf((1-alpha/2)) # Inputs: # z-star: The z-critical value # s: The standard error of the metric at N=1 # d_min: The practical significance level # N: The sample size of each group of the experiment # Returns: The beta value of the two-tailed test def get_beta(z_star,s, d_min, N): SE = s / math.sqrt(N) return norm.cdf(z_star*SE,d_min,SE) # Inputs: # s: The standard error of the metric with N=1 in each group # d_min: The practical significance level # Ns: The sample sizes to try # alpha: The desired alpha level of the test # beta: The desired beta level of the test # Returns: The smallest N out of the given Ns that will achieve the desired # beta. There should be at least N samples in each group of the experiment. # If none of the given Ns will work, returns -1. N is the number of # samples in each group. def required_size(s, d_min, Ns=200000, alpha=0.05, beta=0.2): z=get_z_star(alpha) for N in range(1,Ns): if get_beta(z, s, d_min, N) \u003c= beta: return N return -1 # s is the pooled standard error for N=1 in each group, \"\"\"number of clicks needed for gross_conversion\"\"\" n=1 s=math.sqrt(gross_conversion*(1-gross_conversion)/n) d_min=0.01 req=required_size(s,d_min) print(\"number of clicks needed for gross_conversion:\",int(req)) print(\"number of pageviews needed for gross_conversion:\",int(req/click_through_probability)) number of clicks needed for gross_conversion: 12850 number of pageviews needed for gross_conversion: 160625 \"\"\"number of enrollment needed for retention\"\"\" n=1 s=math.sqrt(retention*(1-retention)/n) d_min=0.01 req=required_size(s,d_min) print(\"number of clicks needed for retention:\",int(req)) print(\"number of pageviews needed for retentionn:\",int(req/(n_enroll/n_pageviews))) number of clicks needed for retention: 19552 number of pageviews needed for retentionn: 1184969 \"\"\"number of clickes needed for net_conversion\"\"\" n=1 s=math.sqrt(net_conversion*(1-net_conversion)/n) d_min=0.0075 req=required_size(s,d_min) print(\"number of clicks needed for net_conversion:\",int(req)) print(\"number of pageviews needed for net_conversion:\",int(req/click_through_probability)) number of clicks needed for net_conversion: 13586 number of pageviews needed for net_conversion: 169825 Duration and Exposure fraction_of_traffic=1 duration=685325/(n_pageviews*fraction_of_traffic) duration 17.133125 Sanity Check For each invariant metric, compute a 95% confidence interval for the value you expect to observe.\nFor invariant metrics we expect equal diversion into the experiment and control group.\ndates=['Sat, Oct 11', 'Sun, Oct 12', 'Mon, Oct 13', 'Tue, Oct 14', 'Wed, Oct 15', 'Thu, Oct 16', 'Fri, Oct 17', 'Sat, Oct 18', 'Sun, Oct 19', 'Mon, Oct 20', 'Tue, Oct 21', 'Wed, Oct 22', 'Thu, Oct 23', 'Fri, Oct 24', 'Sat, Oct 25', 'Sun, Oct 26', 'Mon, Oct 27', 'Tue, Oct 28', 'Wed, Oct 29', 'Thu, Oct 30', 'Fri, Oct 31', 'Sat, Nov 1', 'Sun, Nov 2', 'Mon, Nov 3', 'Tue, Nov 4', 'Wed, Nov 5', 'Thu, Nov 6', 'Fri, Nov 7', 'Sat, Nov 8', 'Sun, Nov 9', 'Mon, Nov 10', 'Tue, Nov 11', 'Wed, Nov 12', 'Thu, Nov 13', 'Fri, Nov 14', 'Sat, Nov 15', 'Sun, Nov 16'] pageviews_cont=[ 7723, 9102, 10511, 9871, 10014, 9670, 9008, 7434, 8459, 10667, 10660, 9947, 8324, 9434, 8687, 8896, 9535, 9363, 9327, 9345, 8890, 8460, 8836, 9437, 9420, 9570, 9921, 9424, 9010, 9656, 10419, 9880, 10134, 9717, 9192, 8630, 8970] pageviews_exp=[ 7716, 9288, 10480, 9867, 9793, 9500, 9088, 7664, 8434, 10496, 10551, 9737, 8176, 9402, 8669, 8881, 9655, 9396, 9262, 9308, 8715, 8448, 8836, 9359, 9427, 9633, 9842, 9272, 8969, 9697, 10445, 9931, 10042, 9721, 9304, 8668, 8988] clicks_cont=[687, 779, 909, 836, 837, 823, 748, 632, 691, 861, 867, 838, 665, 673, 691, 708, 759, 736, 739, 734, 706, 681, 693, 788, 781, 805, 830, 781, 756, 825, 874, 830, 801, 814, 735, 743, 722] clicks_exp=[686, 785, 884, 827, 832, 788, 780, 652, 697, 860, 864, 801, 642, 697, 669, 693, 771, 736, 727, 728, 722, 695, 724, 789, 743, 808, 831, 767, 760, 850, 851, 831, 802, 829, 770, 724, 710] enrolls_cont=[134, 147, 167, 156, 163, 138, 146, 110, 131, 165, 196, 162, 127, 220, 176, 161, 233, 154, 196, 167, 174, 156, 206] enrolls_exp=[105, 116, 145, 138, 140, 129, 127, 94, 120, 153, 143, 128, 122, 194, 127, 153, 213, 162, 201, 207, 182, 142, 182] payment_cont=[ 70, 70, 95, 105, 64, 82, 76, 70, 60, 97, 105, 92, 56, 122, 128, 104, 124, 91, 86, 75, 101, 93, 67] payment_exp=[ 34, 91, 79, 92, 94, 61, 44, 62, 77, 98, 71, 70, 68, 94, 81, 101, 119, 120, 96, 67, 123, 100, 103] ctp_cont=[i/j for i,j in zip(clicks_cont,pageviews_cont)] ctp_exp=[i/j for i,j in zip(clicks_exp,pageviews_exp)] \"\"\"pageviews\"\"\" sum_pv_cont=sum(pageviews_cont) sum_pv_exp=sum(pageviews_exp) SD_pageviews=math.sqrt(0.5*0.5/(sum_pv_cont+sum_pv_exp)) m=1.96*SD_pageviews ci_min,ci_max=0.5-m,0.5+m print(\"Confidence Interval for pageviews: [{},{}]\".format(round(ci_min,4),round(ci_max,4))) print(\"Observed: \",round(sum_pv_cont/(sum_pv_exp+sum_pv_cont),4)) Confidence Interval for pageviews: [0.4988,0.5012] Observed: 0.5006 \"\"\"clicks\"\"\" sum_click_cont=sum(clicks_cont) sum_click_exp=sum(clicks_exp) SD_clicks=math.sqrt(0.5*0.5/(sum_click_cont+sum_click_exp)) m=1.96*SD_clicks ci_min,ci_max=0.5-m,0.5+m print(\"Confidence Interval for clicks: [{},{}]\".format(round(ci_min,4),round(ci_max,4))) print(\"Observed: \",round(sum_click_cont/(sum_click_exp+sum_click_cont),4)) Confidence Interval for clicks: [0.4959,0.5041] Observed: 0.5005 \"\"\"click_through_probability\"\"\" ctp_cont=sum_click_cont/sum_pv_cont ctp_exp=sum_click_exp/sum_pv_exp d_hat=ctp_exp-ctp_cont ctp_pool=(sum_click_cont+sum_click_exp)/(sum_pv_cont+sum_pv_exp) SE_ctp=math.sqrt(ctp_pool*(1-ctp_pool)*(1/sum_pv_cont+1/sum_pv_exp)) m=1.96*SE_ctp ci_min,ci_max=-m,m print(\"Confidence Interval for ctp: [{},{}]\".format(round(ci_min,4),round(ci_max,4))) print(\"Observed: \",round(d_hat,4)) Confidence Interval for ctp: [-0.0013,0.0013] Observed: 0.0001 Effective Size Test For each evaluation metric, compute a 95% confidence interval around the difference between the experiment and control group\n\"\"\"gross conversion\"\"\" n=len(enrolls_exp) d_min=0.01 sum_clicks_cont=sum(clicks_cont[:n]) sum_clicks_exp=sum(clicks_exp[:n]) sum_enroll_cont=sum(enrolls_cont[:n]) sum_enroll_exp=sum(enrolls_exp[:n]) p_pool=(sum_enroll_exp+sum_enroll_cont)/(sum_clicks_exp+sum_clicks_cont) SE_pool=math.sqrt(p_pool*(1-p_pool)*(1/sum_clicks_cont+1/sum_clicks_exp)) m=SE_pool*1.96 d_hat=sum_enroll_exp/sum_clicks_exp-sum_enroll_cont/sum_clicks_cont print(\"Confidence Interval:[{},{}]\".format(d_hat-m,d_hat+m)) print(\"Observed:\",d_hat) print (\"Statistically significant:\", d_hat+m\u003c0 or d_hat-m\u003e0 ,\", CI doesn't include 0\") print(\"Practically significant:\",True,\", CI doesn't include d_min or -d_min\") Confidence Interval:[-0.0291233583354044,-0.01198639082531873] Observed: -0.020554874580361565 Statistically significant: True , CI doesn't include 0 Practically significant: True , CI doesn't include d_min or -d_min \"\"\"retention\"\"\" n=len(payment_exp) d_min=0.01 sum_payment_cont=sum(payment_cont[:n]) sum_payment_exp=sum(payment_exp[:n]) sum_enroll_cont=sum(enrolls_cont[:n]) sum_enroll_exp=sum(enrolls_exp[:n]) p_pool=(sum_payment_cont+sum_payment_exp)/(sum_enroll_cont+sum_enroll_exp) SE_pool=math.sqrt(p_pool*(1-p_pool)*(1/sum_enroll_cont+1/sum_enroll_exp)) m=SE_pool*1.96 d_hat=sum_payment_exp/sum_enroll_exp-sum_payment_cont/sum_enroll_cont print(\"Confidence Interval:[{},{}]\".format(d_hat-m,d_hat+m)) print(\"Observed:\",d_hat) print (\"Statistically significant:\", d_hat+m\u003c0 or d_hat-m\u003e0 ,\", CI doesn't include 0\") print(\"Practically significant:\",False,\", CI include d_min\") Confidence Interval:[0.008104435728019967,0.05408517368626556] Observed: 0.031094804707142765 Statistically significant: True , CI doesn't include 0 Practically significant: False , CI include d_min \"\"\"net conversion\"\"\" n=len(enrolls_exp) d_min=0.0075 sum_clicks_cont=sum(clicks_cont[:n]) sum_clicks_exp=sum(clicks_exp[:n]) sum_payment_cont=sum(payment_cont[:n]) sum_payment_exp=sum(payment_exp[:n]) p_pool=(sum_payment_exp+sum_payment_cont)/(sum_clicks_exp+sum_clicks_cont) SE_pool=math.sqrt(p_pool*(1-p_pool)*(1/sum_clicks_cont+1/sum_clicks_exp)) m=SE_pool*1.96 d_hat=sum_payment_exp/sum_clicks_exp-sum_payment_cont/sum_clicks_cont print(\"Confidence Interval:[{},{}]\".format(d_hat-m,d_hat+m)) print(\"Observed:\",d_hat) print (\"Statistically significant:\", d_hat+m\u003c0 or d_hat-m\u003e0 ,\", CI doesn't include 0\") print(\"Practically significant:\",False,\", CI include d_min\") Confidence Interval:[-0.011604624359891718,0.001857179010803383] Observed: -0.0048737226745441675 Statistically significant: False , CI doesn't include 0 Practically significant: False , CI include d_min Sign Tests Run a sign test on each evaluation metric using the day-by-day data\nfrom scipy.stats import binom_test \"\"\"gross conversion\"\"\" alpha=0.05 beta=0.2 gc_exp=[i/j for i,j in zip(enrolls_exp,clicks_exp)] gc_cont=[i/j for i,j in zip(enrolls_cont,clicks_cont)] gc_diff=sum([i\u003ej for i,j in zip(gc_exp,gc_cont)]) days=len(gc_exp) # The prob of gross conversion of experiment group \u003e gross conversion of control group is 0.5 p_value=binom_test(gc_diff, n=days, p=0.5) print(\"p-value:\",p_value,\", Statistically Significant:\",p_value\u003calpha) p-value: 0.0025994777679443364 , Statistically Significant: True \"\"\"retention\"\"\" rt_exp=[i/j for i,j in zip(payment_exp,enrolls_exp)] rt_cont=[i/j for i,j in zip(payment_cont,enrolls_cont)] rt_diff=sum([i\u003ej for i,j in zip(rt_exp,rt_cont)]) days=len(rt_exp) p_value=binom_test(rt_diff, n=days, p=0.5) print(\"p-value:\",p_value,\", Statistically Significant:\",p_value\u003calpha) p-value: 0.6776394844055175 , Statistically Significant: False len(gc_exp) 23 \"\"\"net conversion\"\"\" nc_exp=[i/j for i,j in zip(payment_exp,clicks_exp)] nc_cont=[i/j for i,j in zip(payment_cont,clicks_cont)] nc_diff=sum([i\u003ej for i,j in zip(nc_exp,nc_cont)]) days=len(nc_exp) p_value=binom_test(nc_diff, n=days, p=0.5) print(\"p-value:\",p_value,\", Statistically Significant:\",p_value\u003calpha) p-value: 0.6776394844055175 , Statistically Significant: False Recomendation: not to launch\n","wordCount":"2035","inLanguage":"en","datePublished":"2020-07-03T14:28:54Z","dateModified":"2020-07-03T14:28:54Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://nancyyanyu.github.io/posts/ab_testing_final_project/"},"publisher":{"@type":"Organization","name":"Nancy's Notebook","logo":{"@type":"ImageObject","url":"https://nancyyanyu.github.io/%3Clink%20/%20abs%20url%3E"}}}</script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css integrity=sha384-GvrOXuhMATgEsSwCs4smul74iXGOixntILdUW9XmUC6+HX0sLNAK3q71HotJqlAn crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js integrity=sha384-cpW21h6RZv/phavutF+AuVYrr+dA8xD9zs6FwLpaCct6O9ctzYFfFr4dgmgccOTx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1})})</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://nancyyanyu.github.io/ accesskey=h title="Nancy's Notebook (Alt + H)"><img src=https://nancyyanyu.github.io/apple-touch-icon.png alt aria-label=logo height=35>Nancy's Notebook</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://nancyyanyu.github.io/archives title=Archive><span>Archive</span></a></li><li><a href=https://nancyyanyu.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://nancyyanyu.github.io/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://nancyyanyu.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://nancyyanyu.github.io/posts/>Posts</a></div><h1 class=post-title>A/B Testing Final Project</h1><div class=post-meta><span title='2020-07-03 14:28:54 +0000 UTC'>July 3, 2020</span>&nbsp;·&nbsp;10 min&nbsp;·&nbsp;2035 words&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/posts/AB_Testing_Final_Project/index.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><p>Implementation of Udacity A/B Testing course final project.</p><h1 id=experiment-overview-free-trial-screener>Experiment Overview: Free Trial Screener<a hidden class=anchor aria-hidden=true href=#experiment-overview-free-trial-screener>#</a></h1><p>At the time of this experiment, Udacity courses currently have two options on the course overview page: &ldquo;start free trial&rdquo;, and &ldquo;access course materials&rdquo;. If the student clicks &ldquo;start free trial&rdquo;, they will be asked to enter their credit card information, and then they will be enrolled in a free trial for the paid version of the course. After 14 days, they will automatically be charged unless they cancel first. If the student clicks &ldquo;access course materials&rdquo;, they will be able to view the videos and take the quizzes for free, but they will not receive coaching support or a verified certificate, and they will not submit their final project for feedback.</p><p>In the experiment, Udacity tested a change where if the student clicked &ldquo;start free trial&rdquo;, they were asked how much time they had available to devote to the course. If the student indicated 5 or more hours per week, they would be taken through the checkout process as usual. If they indicated fewer than 5 hours per week, a message would appear indicating that Udacity courses usually require a greater time commitment for successful completion, and suggesting that the student might like to access the course materials for free. At this point, the student would have the option to continue enrolling in the free trial, or access the course materials for free instead. This screenshot shows what the experiment looks like.</p><p>The <strong>hypothesis</strong> was that this might set clearer expectations for students upfront, thus reducing the number of frustrated students who left the free trial because they didn&rsquo;t have enough time—without significantly reducing the number of students to continue past the free trial and eventually complete the course. If this hypothesis held true, Udacity could improve the overall student experience and improve coaches&rsquo; capacity to support students who are likely to complete the course.</p><p>The <strong>unit of diversion is a cookie</strong>, although if the student enrolls in the free trial, they are tracked by user-id from that point forward. The same user-id cannot enroll in the free trial twice. For users that do not enroll, their user-id is not tracked in the experiment, even if they were signed in when they visited the course overview page.</p><h2 id=metric-choice>Metric Choice<a hidden class=anchor aria-hidden=true href=#metric-choice>#</a></h2><p>Which of the following metrics would you choose to measure for this experiment and why? For each metric you choose, indicate whether you would use it as an invariant metric or an evaluation metric. The practical significance boundary for each metric, that is, the difference that would have to be observed before that was a meaningful change for the business, is given in parentheses. All practical significance boundaries are given as absolute changes.</p><p>Any place &ldquo;unique cookies&rdquo; are mentioned, the uniqueness is determined by day. (That is, the same cookie visiting on different days would be counted twice.) User-ids are automatically unique since the site does not allow the same user-id to enroll twice.</p><ul><li><em><strong>Number of cookies</strong></em>: That is, number of unique cookies to view the course overview page. ($d_{min}=3000$)</li><li><em><strong>Number of user-ids</strong></em>: That is, number of users who enroll in the free trial. ($d_{min}=50$)</li><li><em><strong>Number of clicks</strong></em>: That is, number of unique cookies to click the &ldquo;Start free trial&rdquo; button (which happens before the free trial screener is trigger). ($d_{min}=240$)</li><li><em><strong>Click-through-probability</strong></em>: That is, number of unique cookies to click the &ldquo;Start free trial&rdquo; button divided by number of unique cookies to view the course overview page. ($d_{min}=0.01$)</li><li><em><strong>Gross conversion</strong></em>: That is, number of user-ids to complete checkout and enroll in the free trial divided by number of unique cookies to click the &ldquo;Start free trial&rdquo; button. ($d_{min}=0.01$)</li><li><em><strong>Retention</strong></em>: That is, number of user-ids to remain enrolled past the 14-day boundary (and thus make at least one payment) divided by number of user-ids to complete checkout. ($d_{min}=0.01$)</li><li><em><strong>Net conversion</strong></em>: That is, number of user-ids to remain enrolled past the 14-day boundary (and thus make at least one payment) divided by the number of unique cookies to click the &ldquo;Start free trial&rdquo; button. ($d_{min}=0.0075$)</li></ul><p>You should also decide now what results you will be looking for in order to launch the experiment. Would a change in any one of your evaluation metrics be sufficient? Would you want to see multiple metrics all move or not move at the same time in order to launch? This decision will inform your choices while designing the experiment.</p><p><em><strong>Invariant Metrics</strong></em> : number of cookies, number of clicks, click-through-probability.</p><p><em><strong>Evaluation Metrics</strong></em> : gross conversion, retention, net conversion.</p><h2 id=measure-variability>Measure Variability<a hidden class=anchor aria-hidden=true href=#measure-variability>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>math</span>
</span></span><span class=line><span class=cl><span class=n>n_pageviews</span><span class=o>=</span><span class=mi>40000</span>
</span></span><span class=line><span class=cl><span class=n>n_clicks</span><span class=o>=</span><span class=mi>3200</span>
</span></span><span class=line><span class=cl><span class=n>n_enroll</span><span class=o>=</span><span class=mi>660</span>
</span></span><span class=line><span class=cl><span class=n>ctp</span><span class=o>=</span><span class=mf>0.08</span>
</span></span><span class=line><span class=cl><span class=n>n_sample</span><span class=o>=</span><span class=mi>5000</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>click_through_probability</span><span class=o>=</span><span class=mf>0.08</span> <span class=c1>#clicks / pageviews</span>
</span></span><span class=line><span class=cl><span class=n>gross_conversion</span><span class=o>=</span><span class=mf>0.20625</span> <span class=c1># enroll / click</span>
</span></span><span class=line><span class=cl><span class=n>retention</span><span class=o>=</span><span class=mf>0.53</span> <span class=c1># payment / enroll</span>
</span></span><span class=line><span class=cl><span class=n>net_conversion</span><span class=o>=</span><span class=mf>0.1093125</span> <span class=c1># payment / click</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;analytic standard deviation estimate&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># gross_conversion</span>
</span></span><span class=line><span class=cl><span class=n>std_gross_conversion</span><span class=o>=</span><span class=n>math</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=n>gross_conversion</span><span class=o>*</span><span class=p>(</span><span class=mi>1</span><span class=o>-</span><span class=n>gross_conversion</span><span class=p>)</span><span class=o>/</span><span class=p>(</span><span class=n>n_clicks</span><span class=o>/</span><span class=n>n_pageviews</span><span class=o>*</span><span class=n>n_sample</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=c1># retention</span>
</span></span><span class=line><span class=cl><span class=n>std_retention</span><span class=o>=</span><span class=n>math</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=n>retention</span><span class=o>*</span><span class=p>(</span><span class=mi>1</span><span class=o>-</span><span class=n>retention</span><span class=p>)</span><span class=o>/</span><span class=p>(</span><span class=n>n_enroll</span><span class=o>/</span><span class=n>n_pageviews</span><span class=o>*</span><span class=n>n_sample</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=c1># net_conversion</span>
</span></span><span class=line><span class=cl><span class=n>std_net_conversion</span><span class=o>=</span><span class=n>math</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=n>net_conversion</span><span class=o>*</span><span class=p>(</span><span class=mi>1</span><span class=o>-</span><span class=n>net_conversion</span><span class=p>)</span><span class=o>/</span><span class=p>(</span><span class=n>n_clicks</span><span class=o>/</span><span class=n>n_pageviews</span><span class=o>*</span><span class=n>n_sample</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;SD of GC: &#34;</span><span class=p>,</span><span class=nb>round</span><span class=p>(</span><span class=n>std_gross_conversion</span><span class=p>,</span><span class=mi>4</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;SD of Retention: &#34;</span><span class=p>,</span><span class=nb>round</span><span class=p>(</span><span class=n>std_retention</span><span class=p>,</span><span class=mi>4</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;SD of NC: &#34;</span><span class=p>,</span><span class=nb>round</span><span class=p>(</span><span class=n>std_net_conversion</span><span class=p>,</span><span class=mi>4</span><span class=p>))</span>
</span></span></code></pre></div><pre><code>SD of GC:  0.0202
SD of Retention:  0.0549
SD of NC:  0.0156
</code></pre><h2 id=sizing>Sizing<a hidden class=anchor aria-hidden=true href=#sizing>#</a></h2><ul><li>Will you use Bonferroni Correction?</li></ul><blockquote><p>Evaluation metrics are closely related to each other, so that Bonferroni would be too conservative.</p></blockquote><ul><li>Which evaluation metrics did you choose?</li></ul><blockquote><p>gross conversion, retention, net conversion</p></blockquote><ul><li>How many pageviews will you need?</li></ul><h3 id=using-sample-size-calculator>Using sample size calculator<a hidden class=anchor aria-hidden=true href=#using-sample-size-calculator>#</a></h3><p><a href=https://www.evanmiller.org/ab-testing/sample-size.html>https://www.evanmiller.org/ab-testing/sample-size.html</a></p><p><strong>gross conversion</strong></p><ul><li>Baseline rate: 20.625%</li><li>Minimum Detectable Effect: 0.01</li><li>Sample size: 25,835 clicks/group</li><li>Total sample size: 25,835*2=51670 clicks</li><li>Pageviews= 51670 / 0.08 (clicks / pageviews)=645875</li></ul><p><strong>retention</strong></p><ul><li>Baseline rate: 53%</li><li>Minimum Detectable Effect: 0.01</li><li>Sample size: 39,115 enrolls/group</li><li>Total sample size: 39,115*2=78230 enrolls</li><li>Pageviews= 78230 / (660/40000) (enrolls / pageviews)=4741212</li></ul><p><strong>net conversion</strong></p><ul><li>Baseline rate: 10.93125%</li><li>Minimum Detectable Effect: 0.0075</li><li>Sample size: 27,413 clicks/group</li><li>Total sample size: 27,413*2=54826 clicks</li><li>Pageviews= 54826 / 0.08 (clicks / pageviews)=685325</li></ul><p>The maximum number of pageviews is 4741212</p><h3 id=using-standard-error>Using Standard Error<a hidden class=anchor aria-hidden=true href=#using-standard-error>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>scipy.stats</span> <span class=kn>import</span> <span class=n>norm</span>
</span></span><span class=line><span class=cl><span class=c1># Inputs:</span>
</span></span><span class=line><span class=cl><span class=c1>#   The desired alpha for a two-tailed test</span>
</span></span><span class=line><span class=cl><span class=c1># Returns: The z-critical value</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_z_star</span><span class=p>(</span><span class=n>alpha</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>norm</span><span class=o>.</span><span class=n>ppf</span><span class=p>((</span><span class=mi>1</span><span class=o>-</span><span class=n>alpha</span><span class=o>/</span><span class=mi>2</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Inputs:</span>
</span></span><span class=line><span class=cl><span class=c1>#   z-star: The z-critical value</span>
</span></span><span class=line><span class=cl><span class=c1>#   s: The standard error of the metric at N=1</span>
</span></span><span class=line><span class=cl><span class=c1>#   d_min: The practical significance level</span>
</span></span><span class=line><span class=cl><span class=c1>#   N: The sample size of each group of the experiment</span>
</span></span><span class=line><span class=cl><span class=c1># Returns: The beta value of the two-tailed test</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_beta</span><span class=p>(</span><span class=n>z_star</span><span class=p>,</span><span class=n>s</span><span class=p>,</span> <span class=n>d_min</span><span class=p>,</span> <span class=n>N</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>SE</span> <span class=o>=</span> <span class=n>s</span> <span class=o>/</span>  <span class=n>math</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=n>N</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>norm</span><span class=o>.</span><span class=n>cdf</span><span class=p>(</span><span class=n>z_star</span><span class=o>*</span><span class=n>SE</span><span class=p>,</span><span class=n>d_min</span><span class=p>,</span><span class=n>SE</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Inputs:</span>
</span></span><span class=line><span class=cl><span class=c1>#   s: The standard error of the metric with N=1 in each group</span>
</span></span><span class=line><span class=cl><span class=c1>#   d_min: The practical significance level</span>
</span></span><span class=line><span class=cl><span class=c1>#   Ns: The sample sizes to try</span>
</span></span><span class=line><span class=cl><span class=c1>#   alpha: The desired alpha level of the test</span>
</span></span><span class=line><span class=cl><span class=c1>#   beta: The desired beta level of the test</span>
</span></span><span class=line><span class=cl><span class=c1># Returns: The smallest N out of the given Ns that will achieve the desired</span>
</span></span><span class=line><span class=cl><span class=c1>#          beta. There should be at least N samples in each group of the experiment.</span>
</span></span><span class=line><span class=cl><span class=c1>#          If none of the given Ns will work, returns -1. N is the number of</span>
</span></span><span class=line><span class=cl><span class=c1>#          samples in each group.</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>required_size</span><span class=p>(</span><span class=n>s</span><span class=p>,</span> <span class=n>d_min</span><span class=p>,</span> <span class=n>Ns</span><span class=o>=</span><span class=mi>200000</span><span class=p>,</span> <span class=n>alpha</span><span class=o>=</span><span class=mf>0.05</span><span class=p>,</span> <span class=n>beta</span><span class=o>=</span><span class=mf>0.2</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>z</span><span class=o>=</span><span class=n>get_z_star</span><span class=p>(</span><span class=n>alpha</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>N</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=n>Ns</span><span class=p>):</span>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>get_beta</span><span class=p>(</span><span class=n>z</span><span class=p>,</span> <span class=n>s</span><span class=p>,</span> <span class=n>d_min</span><span class=p>,</span> <span class=n>N</span><span class=p>)</span> <span class=o>&lt;=</span> <span class=n>beta</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>N</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=o>-</span><span class=mi>1</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># s is the pooled standard error for N=1 in each group,</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;number of clicks needed for gross_conversion&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=n>n</span><span class=o>=</span><span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>s</span><span class=o>=</span><span class=n>math</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=n>gross_conversion</span><span class=o>*</span><span class=p>(</span><span class=mi>1</span><span class=o>-</span><span class=n>gross_conversion</span><span class=p>)</span><span class=o>/</span><span class=n>n</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>d_min</span><span class=o>=</span><span class=mf>0.01</span>
</span></span><span class=line><span class=cl><span class=n>req</span><span class=o>=</span><span class=n>required_size</span><span class=p>(</span><span class=n>s</span><span class=p>,</span><span class=n>d_min</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;number of clicks needed for gross_conversion:&#34;</span><span class=p>,</span><span class=nb>int</span><span class=p>(</span><span class=n>req</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;number of pageviews needed for gross_conversion:&#34;</span><span class=p>,</span><span class=nb>int</span><span class=p>(</span><span class=n>req</span><span class=o>/</span><span class=n>click_through_probability</span><span class=p>))</span>
</span></span></code></pre></div><pre><code>number of clicks needed for gross_conversion: 12850
number of pageviews needed for gross_conversion: 160625
</code></pre><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;number of enrollment needed for retention&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=n>n</span><span class=o>=</span><span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>s</span><span class=o>=</span><span class=n>math</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=n>retention</span><span class=o>*</span><span class=p>(</span><span class=mi>1</span><span class=o>-</span><span class=n>retention</span><span class=p>)</span><span class=o>/</span><span class=n>n</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>d_min</span><span class=o>=</span><span class=mf>0.01</span>
</span></span><span class=line><span class=cl><span class=n>req</span><span class=o>=</span><span class=n>required_size</span><span class=p>(</span><span class=n>s</span><span class=p>,</span><span class=n>d_min</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;number of clicks needed for retention:&#34;</span><span class=p>,</span><span class=nb>int</span><span class=p>(</span><span class=n>req</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;number of pageviews needed for retentionn:&#34;</span><span class=p>,</span><span class=nb>int</span><span class=p>(</span><span class=n>req</span><span class=o>/</span><span class=p>(</span><span class=n>n_enroll</span><span class=o>/</span><span class=n>n_pageviews</span><span class=p>)))</span>
</span></span></code></pre></div><pre><code>number of clicks needed for retention: 19552
number of pageviews needed for retentionn: 1184969
</code></pre><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;number of clickes needed for net_conversion&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=n>n</span><span class=o>=</span><span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>s</span><span class=o>=</span><span class=n>math</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=n>net_conversion</span><span class=o>*</span><span class=p>(</span><span class=mi>1</span><span class=o>-</span><span class=n>net_conversion</span><span class=p>)</span><span class=o>/</span><span class=n>n</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>d_min</span><span class=o>=</span><span class=mf>0.0075</span>
</span></span><span class=line><span class=cl><span class=n>req</span><span class=o>=</span><span class=n>required_size</span><span class=p>(</span><span class=n>s</span><span class=p>,</span><span class=n>d_min</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;number of clicks needed for net_conversion:&#34;</span><span class=p>,</span><span class=nb>int</span><span class=p>(</span><span class=n>req</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;number of pageviews needed for net_conversion:&#34;</span><span class=p>,</span><span class=nb>int</span><span class=p>(</span><span class=n>req</span><span class=o>/</span><span class=n>click_through_probability</span><span class=p>))</span>
</span></span></code></pre></div><pre><code>number of clicks needed for net_conversion: 13586
number of pageviews needed for net_conversion: 169825
</code></pre><h2 id=duration-and-exposure>Duration and Exposure<a hidden class=anchor aria-hidden=true href=#duration-and-exposure>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>fraction_of_traffic</span><span class=o>=</span><span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>duration</span><span class=o>=</span><span class=mi>685325</span><span class=o>/</span><span class=p>(</span><span class=n>n_pageviews</span><span class=o>*</span><span class=n>fraction_of_traffic</span><span class=p>)</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>duration</span>
</span></span></code></pre></div><pre><code>17.133125
</code></pre><h2 id=sanity-check>Sanity Check<a hidden class=anchor aria-hidden=true href=#sanity-check>#</a></h2><p>For each invariant metric, compute a 95% confidence interval for the value you expect to observe.</p><p>For invariant metrics we expect equal diversion into the experiment and control group.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>dates</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;Sat, Oct 11&#39;</span><span class=p>,</span> <span class=s1>&#39;Sun, Oct 12&#39;</span><span class=p>,</span> <span class=s1>&#39;Mon, Oct 13&#39;</span><span class=p>,</span> <span class=s1>&#39;Tue, Oct 14&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>       <span class=s1>&#39;Wed, Oct 15&#39;</span><span class=p>,</span> <span class=s1>&#39;Thu, Oct 16&#39;</span><span class=p>,</span> <span class=s1>&#39;Fri, Oct 17&#39;</span><span class=p>,</span> <span class=s1>&#39;Sat, Oct 18&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>       <span class=s1>&#39;Sun, Oct 19&#39;</span><span class=p>,</span> <span class=s1>&#39;Mon, Oct 20&#39;</span><span class=p>,</span> <span class=s1>&#39;Tue, Oct 21&#39;</span><span class=p>,</span> <span class=s1>&#39;Wed, Oct 22&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>       <span class=s1>&#39;Thu, Oct 23&#39;</span><span class=p>,</span> <span class=s1>&#39;Fri, Oct 24&#39;</span><span class=p>,</span> <span class=s1>&#39;Sat, Oct 25&#39;</span><span class=p>,</span> <span class=s1>&#39;Sun, Oct 26&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>       <span class=s1>&#39;Mon, Oct 27&#39;</span><span class=p>,</span> <span class=s1>&#39;Tue, Oct 28&#39;</span><span class=p>,</span> <span class=s1>&#39;Wed, Oct 29&#39;</span><span class=p>,</span> <span class=s1>&#39;Thu, Oct 30&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>       <span class=s1>&#39;Fri, Oct 31&#39;</span><span class=p>,</span> <span class=s1>&#39;Sat, Nov 1&#39;</span><span class=p>,</span> <span class=s1>&#39;Sun, Nov 2&#39;</span><span class=p>,</span> <span class=s1>&#39;Mon, Nov 3&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>       <span class=s1>&#39;Tue, Nov 4&#39;</span><span class=p>,</span> <span class=s1>&#39;Wed, Nov 5&#39;</span><span class=p>,</span> <span class=s1>&#39;Thu, Nov 6&#39;</span><span class=p>,</span> <span class=s1>&#39;Fri, Nov 7&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>       <span class=s1>&#39;Sat, Nov 8&#39;</span><span class=p>,</span> <span class=s1>&#39;Sun, Nov 9&#39;</span><span class=p>,</span> <span class=s1>&#39;Mon, Nov 10&#39;</span><span class=p>,</span> <span class=s1>&#39;Tue, Nov 11&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>       <span class=s1>&#39;Wed, Nov 12&#39;</span><span class=p>,</span> <span class=s1>&#39;Thu, Nov 13&#39;</span><span class=p>,</span> <span class=s1>&#39;Fri, Nov 14&#39;</span><span class=p>,</span> <span class=s1>&#39;Sat, Nov 15&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>       <span class=s1>&#39;Sun, Nov 16&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>pageviews_cont</span><span class=o>=</span><span class=p>[</span> <span class=mi>7723</span><span class=p>,</span>  <span class=mi>9102</span><span class=p>,</span> <span class=mi>10511</span><span class=p>,</span>  <span class=mi>9871</span><span class=p>,</span> <span class=mi>10014</span><span class=p>,</span>  <span class=mi>9670</span><span class=p>,</span>  <span class=mi>9008</span><span class=p>,</span>  <span class=mi>7434</span><span class=p>,</span>  <span class=mi>8459</span><span class=p>,</span>
</span></span><span class=line><span class=cl>       <span class=mi>10667</span><span class=p>,</span> <span class=mi>10660</span><span class=p>,</span>  <span class=mi>9947</span><span class=p>,</span>  <span class=mi>8324</span><span class=p>,</span>  <span class=mi>9434</span><span class=p>,</span>  <span class=mi>8687</span><span class=p>,</span>  <span class=mi>8896</span><span class=p>,</span>  <span class=mi>9535</span><span class=p>,</span>  <span class=mi>9363</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=mi>9327</span><span class=p>,</span>  <span class=mi>9345</span><span class=p>,</span>  <span class=mi>8890</span><span class=p>,</span>  <span class=mi>8460</span><span class=p>,</span>  <span class=mi>8836</span><span class=p>,</span>  <span class=mi>9437</span><span class=p>,</span>  <span class=mi>9420</span><span class=p>,</span>  <span class=mi>9570</span><span class=p>,</span>  <span class=mi>9921</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=mi>9424</span><span class=p>,</span>  <span class=mi>9010</span><span class=p>,</span>  <span class=mi>9656</span><span class=p>,</span> <span class=mi>10419</span><span class=p>,</span>  <span class=mi>9880</span><span class=p>,</span> <span class=mi>10134</span><span class=p>,</span>  <span class=mi>9717</span><span class=p>,</span>  <span class=mi>9192</span><span class=p>,</span>  <span class=mi>8630</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=mi>8970</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>pageviews_exp</span><span class=o>=</span><span class=p>[</span> <span class=mi>7716</span><span class=p>,</span>  <span class=mi>9288</span><span class=p>,</span> <span class=mi>10480</span><span class=p>,</span>  <span class=mi>9867</span><span class=p>,</span>  <span class=mi>9793</span><span class=p>,</span>  <span class=mi>9500</span><span class=p>,</span>  <span class=mi>9088</span><span class=p>,</span>  <span class=mi>7664</span><span class=p>,</span>  <span class=mi>8434</span><span class=p>,</span>
</span></span><span class=line><span class=cl>       <span class=mi>10496</span><span class=p>,</span> <span class=mi>10551</span><span class=p>,</span>  <span class=mi>9737</span><span class=p>,</span>  <span class=mi>8176</span><span class=p>,</span>  <span class=mi>9402</span><span class=p>,</span>  <span class=mi>8669</span><span class=p>,</span>  <span class=mi>8881</span><span class=p>,</span>  <span class=mi>9655</span><span class=p>,</span>  <span class=mi>9396</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=mi>9262</span><span class=p>,</span>  <span class=mi>9308</span><span class=p>,</span>  <span class=mi>8715</span><span class=p>,</span>  <span class=mi>8448</span><span class=p>,</span>  <span class=mi>8836</span><span class=p>,</span>  <span class=mi>9359</span><span class=p>,</span>  <span class=mi>9427</span><span class=p>,</span>  <span class=mi>9633</span><span class=p>,</span>  <span class=mi>9842</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=mi>9272</span><span class=p>,</span>  <span class=mi>8969</span><span class=p>,</span>  <span class=mi>9697</span><span class=p>,</span> <span class=mi>10445</span><span class=p>,</span>  <span class=mi>9931</span><span class=p>,</span> <span class=mi>10042</span><span class=p>,</span>  <span class=mi>9721</span><span class=p>,</span>  <span class=mi>9304</span><span class=p>,</span>  <span class=mi>8668</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=mi>8988</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>clicks_cont</span><span class=o>=</span><span class=p>[</span><span class=mi>687</span><span class=p>,</span> <span class=mi>779</span><span class=p>,</span> <span class=mi>909</span><span class=p>,</span> <span class=mi>836</span><span class=p>,</span> <span class=mi>837</span><span class=p>,</span> <span class=mi>823</span><span class=p>,</span> <span class=mi>748</span><span class=p>,</span> <span class=mi>632</span><span class=p>,</span> <span class=mi>691</span><span class=p>,</span> <span class=mi>861</span><span class=p>,</span> <span class=mi>867</span><span class=p>,</span> <span class=mi>838</span><span class=p>,</span> <span class=mi>665</span><span class=p>,</span>
</span></span><span class=line><span class=cl>       <span class=mi>673</span><span class=p>,</span> <span class=mi>691</span><span class=p>,</span> <span class=mi>708</span><span class=p>,</span> <span class=mi>759</span><span class=p>,</span> <span class=mi>736</span><span class=p>,</span> <span class=mi>739</span><span class=p>,</span> <span class=mi>734</span><span class=p>,</span> <span class=mi>706</span><span class=p>,</span> <span class=mi>681</span><span class=p>,</span> <span class=mi>693</span><span class=p>,</span> <span class=mi>788</span><span class=p>,</span> <span class=mi>781</span><span class=p>,</span> <span class=mi>805</span><span class=p>,</span>
</span></span><span class=line><span class=cl>       <span class=mi>830</span><span class=p>,</span> <span class=mi>781</span><span class=p>,</span> <span class=mi>756</span><span class=p>,</span> <span class=mi>825</span><span class=p>,</span> <span class=mi>874</span><span class=p>,</span> <span class=mi>830</span><span class=p>,</span> <span class=mi>801</span><span class=p>,</span> <span class=mi>814</span><span class=p>,</span> <span class=mi>735</span><span class=p>,</span> <span class=mi>743</span><span class=p>,</span> <span class=mi>722</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>clicks_exp</span><span class=o>=</span><span class=p>[</span><span class=mi>686</span><span class=p>,</span> <span class=mi>785</span><span class=p>,</span> <span class=mi>884</span><span class=p>,</span> <span class=mi>827</span><span class=p>,</span> <span class=mi>832</span><span class=p>,</span> <span class=mi>788</span><span class=p>,</span> <span class=mi>780</span><span class=p>,</span> <span class=mi>652</span><span class=p>,</span> <span class=mi>697</span><span class=p>,</span> <span class=mi>860</span><span class=p>,</span> <span class=mi>864</span><span class=p>,</span> <span class=mi>801</span><span class=p>,</span> <span class=mi>642</span><span class=p>,</span>
</span></span><span class=line><span class=cl>       <span class=mi>697</span><span class=p>,</span> <span class=mi>669</span><span class=p>,</span> <span class=mi>693</span><span class=p>,</span> <span class=mi>771</span><span class=p>,</span> <span class=mi>736</span><span class=p>,</span> <span class=mi>727</span><span class=p>,</span> <span class=mi>728</span><span class=p>,</span> <span class=mi>722</span><span class=p>,</span> <span class=mi>695</span><span class=p>,</span> <span class=mi>724</span><span class=p>,</span> <span class=mi>789</span><span class=p>,</span> <span class=mi>743</span><span class=p>,</span> <span class=mi>808</span><span class=p>,</span>
</span></span><span class=line><span class=cl>       <span class=mi>831</span><span class=p>,</span> <span class=mi>767</span><span class=p>,</span> <span class=mi>760</span><span class=p>,</span> <span class=mi>850</span><span class=p>,</span> <span class=mi>851</span><span class=p>,</span> <span class=mi>831</span><span class=p>,</span> <span class=mi>802</span><span class=p>,</span> <span class=mi>829</span><span class=p>,</span> <span class=mi>770</span><span class=p>,</span> <span class=mi>724</span><span class=p>,</span> <span class=mi>710</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>enrolls_cont</span><span class=o>=</span><span class=p>[</span><span class=mi>134</span><span class=p>,</span> <span class=mi>147</span><span class=p>,</span> <span class=mi>167</span><span class=p>,</span> <span class=mi>156</span><span class=p>,</span> <span class=mi>163</span><span class=p>,</span> <span class=mi>138</span><span class=p>,</span> <span class=mi>146</span><span class=p>,</span> <span class=mi>110</span><span class=p>,</span> <span class=mi>131</span><span class=p>,</span> <span class=mi>165</span><span class=p>,</span> <span class=mi>196</span><span class=p>,</span> <span class=mi>162</span><span class=p>,</span> <span class=mi>127</span><span class=p>,</span>
</span></span><span class=line><span class=cl>       <span class=mi>220</span><span class=p>,</span> <span class=mi>176</span><span class=p>,</span> <span class=mi>161</span><span class=p>,</span> <span class=mi>233</span><span class=p>,</span> <span class=mi>154</span><span class=p>,</span> <span class=mi>196</span><span class=p>,</span> <span class=mi>167</span><span class=p>,</span> <span class=mi>174</span><span class=p>,</span> <span class=mi>156</span><span class=p>,</span> <span class=mi>206</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>enrolls_exp</span><span class=o>=</span><span class=p>[</span><span class=mi>105</span><span class=p>,</span> <span class=mi>116</span><span class=p>,</span> <span class=mi>145</span><span class=p>,</span> <span class=mi>138</span><span class=p>,</span> <span class=mi>140</span><span class=p>,</span> <span class=mi>129</span><span class=p>,</span> <span class=mi>127</span><span class=p>,</span>  <span class=mi>94</span><span class=p>,</span> <span class=mi>120</span><span class=p>,</span> <span class=mi>153</span><span class=p>,</span> <span class=mi>143</span><span class=p>,</span> <span class=mi>128</span><span class=p>,</span> <span class=mi>122</span><span class=p>,</span>
</span></span><span class=line><span class=cl>       <span class=mi>194</span><span class=p>,</span> <span class=mi>127</span><span class=p>,</span> <span class=mi>153</span><span class=p>,</span> <span class=mi>213</span><span class=p>,</span> <span class=mi>162</span><span class=p>,</span> <span class=mi>201</span><span class=p>,</span> <span class=mi>207</span><span class=p>,</span> <span class=mi>182</span><span class=p>,</span> <span class=mi>142</span><span class=p>,</span> <span class=mi>182</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>payment_cont</span><span class=o>=</span><span class=p>[</span> <span class=mi>70</span><span class=p>,</span>  <span class=mi>70</span><span class=p>,</span>  <span class=mi>95</span><span class=p>,</span> <span class=mi>105</span><span class=p>,</span>  <span class=mi>64</span><span class=p>,</span>  <span class=mi>82</span><span class=p>,</span>  <span class=mi>76</span><span class=p>,</span>  <span class=mi>70</span><span class=p>,</span>  <span class=mi>60</span><span class=p>,</span>  <span class=mi>97</span><span class=p>,</span> <span class=mi>105</span><span class=p>,</span>  <span class=mi>92</span><span class=p>,</span>  <span class=mi>56</span><span class=p>,</span>
</span></span><span class=line><span class=cl>       <span class=mi>122</span><span class=p>,</span> <span class=mi>128</span><span class=p>,</span> <span class=mi>104</span><span class=p>,</span> <span class=mi>124</span><span class=p>,</span>  <span class=mi>91</span><span class=p>,</span>  <span class=mi>86</span><span class=p>,</span>  <span class=mi>75</span><span class=p>,</span> <span class=mi>101</span><span class=p>,</span>  <span class=mi>93</span><span class=p>,</span>  <span class=mi>67</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>payment_exp</span><span class=o>=</span><span class=p>[</span> <span class=mi>34</span><span class=p>,</span>  <span class=mi>91</span><span class=p>,</span>  <span class=mi>79</span><span class=p>,</span>  <span class=mi>92</span><span class=p>,</span>  <span class=mi>94</span><span class=p>,</span>  <span class=mi>61</span><span class=p>,</span>  <span class=mi>44</span><span class=p>,</span>  <span class=mi>62</span><span class=p>,</span>  <span class=mi>77</span><span class=p>,</span>  <span class=mi>98</span><span class=p>,</span>  <span class=mi>71</span><span class=p>,</span>  <span class=mi>70</span><span class=p>,</span>  <span class=mi>68</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=mi>94</span><span class=p>,</span>  <span class=mi>81</span><span class=p>,</span> <span class=mi>101</span><span class=p>,</span> <span class=mi>119</span><span class=p>,</span> <span class=mi>120</span><span class=p>,</span>  <span class=mi>96</span><span class=p>,</span>  <span class=mi>67</span><span class=p>,</span> <span class=mi>123</span><span class=p>,</span> <span class=mi>100</span><span class=p>,</span> <span class=mi>103</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>ctp_cont</span><span class=o>=</span><span class=p>[</span><span class=n>i</span><span class=o>/</span><span class=n>j</span> <span class=k>for</span> <span class=n>i</span><span class=p>,</span><span class=n>j</span> <span class=ow>in</span> <span class=nb>zip</span><span class=p>(</span><span class=n>clicks_cont</span><span class=p>,</span><span class=n>pageviews_cont</span><span class=p>)]</span>
</span></span><span class=line><span class=cl><span class=n>ctp_exp</span><span class=o>=</span><span class=p>[</span><span class=n>i</span><span class=o>/</span><span class=n>j</span> <span class=k>for</span> <span class=n>i</span><span class=p>,</span><span class=n>j</span> <span class=ow>in</span> <span class=nb>zip</span><span class=p>(</span><span class=n>clicks_exp</span><span class=p>,</span><span class=n>pageviews_exp</span><span class=p>)]</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;pageviews&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=n>sum_pv_cont</span><span class=o>=</span><span class=nb>sum</span><span class=p>(</span><span class=n>pageviews_cont</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>sum_pv_exp</span><span class=o>=</span><span class=nb>sum</span><span class=p>(</span><span class=n>pageviews_exp</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>SD_pageviews</span><span class=o>=</span><span class=n>math</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=mf>0.5</span><span class=o>*</span><span class=mf>0.5</span><span class=o>/</span><span class=p>(</span><span class=n>sum_pv_cont</span><span class=o>+</span><span class=n>sum_pv_exp</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>m</span><span class=o>=</span><span class=mf>1.96</span><span class=o>*</span><span class=n>SD_pageviews</span>
</span></span><span class=line><span class=cl><span class=n>ci_min</span><span class=p>,</span><span class=n>ci_max</span><span class=o>=</span><span class=mf>0.5</span><span class=o>-</span><span class=n>m</span><span class=p>,</span><span class=mf>0.5</span><span class=o>+</span><span class=n>m</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Confidence Interval for pageviews: [</span><span class=si>{}</span><span class=s2>,</span><span class=si>{}</span><span class=s2>]&#34;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=nb>round</span><span class=p>(</span><span class=n>ci_min</span><span class=p>,</span><span class=mi>4</span><span class=p>),</span><span class=nb>round</span><span class=p>(</span><span class=n>ci_max</span><span class=p>,</span><span class=mi>4</span><span class=p>)))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Observed: &#34;</span><span class=p>,</span><span class=nb>round</span><span class=p>(</span><span class=n>sum_pv_cont</span><span class=o>/</span><span class=p>(</span><span class=n>sum_pv_exp</span><span class=o>+</span><span class=n>sum_pv_cont</span><span class=p>),</span><span class=mi>4</span><span class=p>))</span>
</span></span></code></pre></div><pre><code>Confidence Interval for pageviews: [0.4988,0.5012]
Observed:  0.5006
</code></pre><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;clicks&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=n>sum_click_cont</span><span class=o>=</span><span class=nb>sum</span><span class=p>(</span><span class=n>clicks_cont</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>sum_click_exp</span><span class=o>=</span><span class=nb>sum</span><span class=p>(</span><span class=n>clicks_exp</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>SD_clicks</span><span class=o>=</span><span class=n>math</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=mf>0.5</span><span class=o>*</span><span class=mf>0.5</span><span class=o>/</span><span class=p>(</span><span class=n>sum_click_cont</span><span class=o>+</span><span class=n>sum_click_exp</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>m</span><span class=o>=</span><span class=mf>1.96</span><span class=o>*</span><span class=n>SD_clicks</span>
</span></span><span class=line><span class=cl><span class=n>ci_min</span><span class=p>,</span><span class=n>ci_max</span><span class=o>=</span><span class=mf>0.5</span><span class=o>-</span><span class=n>m</span><span class=p>,</span><span class=mf>0.5</span><span class=o>+</span><span class=n>m</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Confidence Interval for clicks: [</span><span class=si>{}</span><span class=s2>,</span><span class=si>{}</span><span class=s2>]&#34;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=nb>round</span><span class=p>(</span><span class=n>ci_min</span><span class=p>,</span><span class=mi>4</span><span class=p>),</span><span class=nb>round</span><span class=p>(</span><span class=n>ci_max</span><span class=p>,</span><span class=mi>4</span><span class=p>)))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Observed: &#34;</span><span class=p>,</span><span class=nb>round</span><span class=p>(</span><span class=n>sum_click_cont</span><span class=o>/</span><span class=p>(</span><span class=n>sum_click_exp</span><span class=o>+</span><span class=n>sum_click_cont</span><span class=p>),</span><span class=mi>4</span><span class=p>))</span>
</span></span></code></pre></div><pre><code>Confidence Interval for clicks: [0.4959,0.5041]
Observed:  0.5005
</code></pre><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;click_through_probability&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=n>ctp_cont</span><span class=o>=</span><span class=n>sum_click_cont</span><span class=o>/</span><span class=n>sum_pv_cont</span>
</span></span><span class=line><span class=cl><span class=n>ctp_exp</span><span class=o>=</span><span class=n>sum_click_exp</span><span class=o>/</span><span class=n>sum_pv_exp</span>
</span></span><span class=line><span class=cl><span class=n>d_hat</span><span class=o>=</span><span class=n>ctp_exp</span><span class=o>-</span><span class=n>ctp_cont</span>
</span></span><span class=line><span class=cl><span class=n>ctp_pool</span><span class=o>=</span><span class=p>(</span><span class=n>sum_click_cont</span><span class=o>+</span><span class=n>sum_click_exp</span><span class=p>)</span><span class=o>/</span><span class=p>(</span><span class=n>sum_pv_cont</span><span class=o>+</span><span class=n>sum_pv_exp</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>SE_ctp</span><span class=o>=</span><span class=n>math</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=n>ctp_pool</span><span class=o>*</span><span class=p>(</span><span class=mi>1</span><span class=o>-</span><span class=n>ctp_pool</span><span class=p>)</span><span class=o>*</span><span class=p>(</span><span class=mi>1</span><span class=o>/</span><span class=n>sum_pv_cont</span><span class=o>+</span><span class=mi>1</span><span class=o>/</span><span class=n>sum_pv_exp</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>m</span><span class=o>=</span><span class=mf>1.96</span><span class=o>*</span><span class=n>SE_ctp</span>
</span></span><span class=line><span class=cl><span class=n>ci_min</span><span class=p>,</span><span class=n>ci_max</span><span class=o>=-</span><span class=n>m</span><span class=p>,</span><span class=n>m</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Confidence Interval for ctp: [</span><span class=si>{}</span><span class=s2>,</span><span class=si>{}</span><span class=s2>]&#34;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=nb>round</span><span class=p>(</span><span class=n>ci_min</span><span class=p>,</span><span class=mi>4</span><span class=p>),</span><span class=nb>round</span><span class=p>(</span><span class=n>ci_max</span><span class=p>,</span><span class=mi>4</span><span class=p>)))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Observed: &#34;</span><span class=p>,</span><span class=nb>round</span><span class=p>(</span><span class=n>d_hat</span><span class=p>,</span><span class=mi>4</span><span class=p>))</span>
</span></span></code></pre></div><pre><code>Confidence Interval for ctp: [-0.0013,0.0013]
Observed:  0.0001
</code></pre><h2 id=effective-size-test>Effective Size Test<a hidden class=anchor aria-hidden=true href=#effective-size-test>#</a></h2><p>For each evaluation metric, compute a 95% confidence interval around the difference between the experiment and control group</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;gross conversion&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=n>n</span><span class=o>=</span><span class=nb>len</span><span class=p>(</span><span class=n>enrolls_exp</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>d_min</span><span class=o>=</span><span class=mf>0.01</span>
</span></span><span class=line><span class=cl><span class=n>sum_clicks_cont</span><span class=o>=</span><span class=nb>sum</span><span class=p>(</span><span class=n>clicks_cont</span><span class=p>[:</span><span class=n>n</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>sum_clicks_exp</span><span class=o>=</span><span class=nb>sum</span><span class=p>(</span><span class=n>clicks_exp</span><span class=p>[:</span><span class=n>n</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>sum_enroll_cont</span><span class=o>=</span><span class=nb>sum</span><span class=p>(</span><span class=n>enrolls_cont</span><span class=p>[:</span><span class=n>n</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>sum_enroll_exp</span><span class=o>=</span><span class=nb>sum</span><span class=p>(</span><span class=n>enrolls_exp</span><span class=p>[:</span><span class=n>n</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>p_pool</span><span class=o>=</span><span class=p>(</span><span class=n>sum_enroll_exp</span><span class=o>+</span><span class=n>sum_enroll_cont</span><span class=p>)</span><span class=o>/</span><span class=p>(</span><span class=n>sum_clicks_exp</span><span class=o>+</span><span class=n>sum_clicks_cont</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>SE_pool</span><span class=o>=</span><span class=n>math</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=n>p_pool</span><span class=o>*</span><span class=p>(</span><span class=mi>1</span><span class=o>-</span><span class=n>p_pool</span><span class=p>)</span><span class=o>*</span><span class=p>(</span><span class=mi>1</span><span class=o>/</span><span class=n>sum_clicks_cont</span><span class=o>+</span><span class=mi>1</span><span class=o>/</span><span class=n>sum_clicks_exp</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>m</span><span class=o>=</span><span class=n>SE_pool</span><span class=o>*</span><span class=mf>1.96</span>
</span></span><span class=line><span class=cl><span class=n>d_hat</span><span class=o>=</span><span class=n>sum_enroll_exp</span><span class=o>/</span><span class=n>sum_clicks_exp</span><span class=o>-</span><span class=n>sum_enroll_cont</span><span class=o>/</span><span class=n>sum_clicks_cont</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Confidence Interval:[</span><span class=si>{}</span><span class=s2>,</span><span class=si>{}</span><span class=s2>]&#34;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>d_hat</span><span class=o>-</span><span class=n>m</span><span class=p>,</span><span class=n>d_hat</span><span class=o>+</span><span class=n>m</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Observed:&#34;</span><span class=p>,</span><span class=n>d_hat</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span> <span class=p>(</span><span class=s2>&#34;Statistically significant:&#34;</span><span class=p>,</span> <span class=n>d_hat</span><span class=o>+</span><span class=n>m</span><span class=o>&lt;</span><span class=mi>0</span> <span class=ow>or</span> <span class=n>d_hat</span><span class=o>-</span><span class=n>m</span><span class=o>&gt;</span><span class=mi>0</span> <span class=p>,</span><span class=s2>&#34;,  CI doesn&#39;t include 0&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Practically significant:&#34;</span><span class=p>,</span><span class=kc>True</span><span class=p>,</span><span class=s2>&#34;,  CI doesn&#39;t include d_min or -d_min&#34;</span><span class=p>)</span>
</span></span></code></pre></div><pre><code>Confidence Interval:[-0.0291233583354044,-0.01198639082531873]
Observed: -0.020554874580361565
Statistically significant: True ,  CI doesn't include 0
Practically significant: True ,  CI doesn't include d_min or -d_min
</code></pre><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;retention&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=n>n</span><span class=o>=</span><span class=nb>len</span><span class=p>(</span><span class=n>payment_exp</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>d_min</span><span class=o>=</span><span class=mf>0.01</span>
</span></span><span class=line><span class=cl><span class=n>sum_payment_cont</span><span class=o>=</span><span class=nb>sum</span><span class=p>(</span><span class=n>payment_cont</span><span class=p>[:</span><span class=n>n</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>sum_payment_exp</span><span class=o>=</span><span class=nb>sum</span><span class=p>(</span><span class=n>payment_exp</span><span class=p>[:</span><span class=n>n</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>sum_enroll_cont</span><span class=o>=</span><span class=nb>sum</span><span class=p>(</span><span class=n>enrolls_cont</span><span class=p>[:</span><span class=n>n</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>sum_enroll_exp</span><span class=o>=</span><span class=nb>sum</span><span class=p>(</span><span class=n>enrolls_exp</span><span class=p>[:</span><span class=n>n</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>p_pool</span><span class=o>=</span><span class=p>(</span><span class=n>sum_payment_cont</span><span class=o>+</span><span class=n>sum_payment_exp</span><span class=p>)</span><span class=o>/</span><span class=p>(</span><span class=n>sum_enroll_cont</span><span class=o>+</span><span class=n>sum_enroll_exp</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>SE_pool</span><span class=o>=</span><span class=n>math</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=n>p_pool</span><span class=o>*</span><span class=p>(</span><span class=mi>1</span><span class=o>-</span><span class=n>p_pool</span><span class=p>)</span><span class=o>*</span><span class=p>(</span><span class=mi>1</span><span class=o>/</span><span class=n>sum_enroll_cont</span><span class=o>+</span><span class=mi>1</span><span class=o>/</span><span class=n>sum_enroll_exp</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>m</span><span class=o>=</span><span class=n>SE_pool</span><span class=o>*</span><span class=mf>1.96</span>
</span></span><span class=line><span class=cl><span class=n>d_hat</span><span class=o>=</span><span class=n>sum_payment_exp</span><span class=o>/</span><span class=n>sum_enroll_exp</span><span class=o>-</span><span class=n>sum_payment_cont</span><span class=o>/</span><span class=n>sum_enroll_cont</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Confidence Interval:[</span><span class=si>{}</span><span class=s2>,</span><span class=si>{}</span><span class=s2>]&#34;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>d_hat</span><span class=o>-</span><span class=n>m</span><span class=p>,</span><span class=n>d_hat</span><span class=o>+</span><span class=n>m</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Observed:&#34;</span><span class=p>,</span><span class=n>d_hat</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span> <span class=p>(</span><span class=s2>&#34;Statistically significant:&#34;</span><span class=p>,</span> <span class=n>d_hat</span><span class=o>+</span><span class=n>m</span><span class=o>&lt;</span><span class=mi>0</span> <span class=ow>or</span> <span class=n>d_hat</span><span class=o>-</span><span class=n>m</span><span class=o>&gt;</span><span class=mi>0</span> <span class=p>,</span><span class=s2>&#34;,  CI doesn&#39;t include 0&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Practically significant:&#34;</span><span class=p>,</span><span class=kc>False</span><span class=p>,</span><span class=s2>&#34;,  CI include d_min&#34;</span><span class=p>)</span>
</span></span></code></pre></div><pre><code>Confidence Interval:[0.008104435728019967,0.05408517368626556]
Observed: 0.031094804707142765
Statistically significant: True ,  CI doesn't include 0
Practically significant: False ,  CI include d_min
</code></pre><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;net conversion&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=n>n</span><span class=o>=</span><span class=nb>len</span><span class=p>(</span><span class=n>enrolls_exp</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>d_min</span><span class=o>=</span><span class=mf>0.0075</span>
</span></span><span class=line><span class=cl><span class=n>sum_clicks_cont</span><span class=o>=</span><span class=nb>sum</span><span class=p>(</span><span class=n>clicks_cont</span><span class=p>[:</span><span class=n>n</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>sum_clicks_exp</span><span class=o>=</span><span class=nb>sum</span><span class=p>(</span><span class=n>clicks_exp</span><span class=p>[:</span><span class=n>n</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>sum_payment_cont</span><span class=o>=</span><span class=nb>sum</span><span class=p>(</span><span class=n>payment_cont</span><span class=p>[:</span><span class=n>n</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>sum_payment_exp</span><span class=o>=</span><span class=nb>sum</span><span class=p>(</span><span class=n>payment_exp</span><span class=p>[:</span><span class=n>n</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>p_pool</span><span class=o>=</span><span class=p>(</span><span class=n>sum_payment_exp</span><span class=o>+</span><span class=n>sum_payment_cont</span><span class=p>)</span><span class=o>/</span><span class=p>(</span><span class=n>sum_clicks_exp</span><span class=o>+</span><span class=n>sum_clicks_cont</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>SE_pool</span><span class=o>=</span><span class=n>math</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=n>p_pool</span><span class=o>*</span><span class=p>(</span><span class=mi>1</span><span class=o>-</span><span class=n>p_pool</span><span class=p>)</span><span class=o>*</span><span class=p>(</span><span class=mi>1</span><span class=o>/</span><span class=n>sum_clicks_cont</span><span class=o>+</span><span class=mi>1</span><span class=o>/</span><span class=n>sum_clicks_exp</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>m</span><span class=o>=</span><span class=n>SE_pool</span><span class=o>*</span><span class=mf>1.96</span>
</span></span><span class=line><span class=cl><span class=n>d_hat</span><span class=o>=</span><span class=n>sum_payment_exp</span><span class=o>/</span><span class=n>sum_clicks_exp</span><span class=o>-</span><span class=n>sum_payment_cont</span><span class=o>/</span><span class=n>sum_clicks_cont</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Confidence Interval:[</span><span class=si>{}</span><span class=s2>,</span><span class=si>{}</span><span class=s2>]&#34;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>d_hat</span><span class=o>-</span><span class=n>m</span><span class=p>,</span><span class=n>d_hat</span><span class=o>+</span><span class=n>m</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Observed:&#34;</span><span class=p>,</span><span class=n>d_hat</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span> <span class=p>(</span><span class=s2>&#34;Statistically significant:&#34;</span><span class=p>,</span> <span class=n>d_hat</span><span class=o>+</span><span class=n>m</span><span class=o>&lt;</span><span class=mi>0</span> <span class=ow>or</span> <span class=n>d_hat</span><span class=o>-</span><span class=n>m</span><span class=o>&gt;</span><span class=mi>0</span> <span class=p>,</span><span class=s2>&#34;,  CI doesn&#39;t include 0&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Practically significant:&#34;</span><span class=p>,</span><span class=kc>False</span><span class=p>,</span><span class=s2>&#34;,  CI include d_min&#34;</span><span class=p>)</span>
</span></span></code></pre></div><pre><code>Confidence Interval:[-0.011604624359891718,0.001857179010803383]
Observed: -0.0048737226745441675
Statistically significant: False ,  CI doesn't include 0
Practically significant: False ,  CI include d_min
</code></pre><h2 id=sign-tests>Sign Tests<a hidden class=anchor aria-hidden=true href=#sign-tests>#</a></h2><p>Run a sign test on each evaluation metric using the day-by-day data</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>scipy.stats</span> <span class=kn>import</span> <span class=n>binom_test</span> 
</span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;gross conversion&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=n>alpha</span><span class=o>=</span><span class=mf>0.05</span>
</span></span><span class=line><span class=cl><span class=n>beta</span><span class=o>=</span><span class=mf>0.2</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>gc_exp</span><span class=o>=</span><span class=p>[</span><span class=n>i</span><span class=o>/</span><span class=n>j</span> <span class=k>for</span> <span class=n>i</span><span class=p>,</span><span class=n>j</span> <span class=ow>in</span> <span class=nb>zip</span><span class=p>(</span><span class=n>enrolls_exp</span><span class=p>,</span><span class=n>clicks_exp</span><span class=p>)]</span>
</span></span><span class=line><span class=cl><span class=n>gc_cont</span><span class=o>=</span><span class=p>[</span><span class=n>i</span><span class=o>/</span><span class=n>j</span> <span class=k>for</span> <span class=n>i</span><span class=p>,</span><span class=n>j</span> <span class=ow>in</span> <span class=nb>zip</span><span class=p>(</span><span class=n>enrolls_cont</span><span class=p>,</span><span class=n>clicks_cont</span><span class=p>)]</span>
</span></span><span class=line><span class=cl><span class=n>gc_diff</span><span class=o>=</span><span class=nb>sum</span><span class=p>([</span><span class=n>i</span><span class=o>&gt;</span><span class=n>j</span> <span class=k>for</span> <span class=n>i</span><span class=p>,</span><span class=n>j</span> <span class=ow>in</span> <span class=nb>zip</span><span class=p>(</span><span class=n>gc_exp</span><span class=p>,</span><span class=n>gc_cont</span><span class=p>)])</span>
</span></span><span class=line><span class=cl><span class=n>days</span><span class=o>=</span><span class=nb>len</span><span class=p>(</span><span class=n>gc_exp</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># The prob of gross conversion of experiment group &gt; gross conversion of control group is 0.5</span>
</span></span><span class=line><span class=cl><span class=n>p_value</span><span class=o>=</span><span class=n>binom_test</span><span class=p>(</span><span class=n>gc_diff</span><span class=p>,</span> <span class=n>n</span><span class=o>=</span><span class=n>days</span><span class=p>,</span> <span class=n>p</span><span class=o>=</span><span class=mf>0.5</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;p-value:&#34;</span><span class=p>,</span><span class=n>p_value</span><span class=p>,</span><span class=s2>&#34;, Statistically Significant:&#34;</span><span class=p>,</span><span class=n>p_value</span><span class=o>&lt;</span><span class=n>alpha</span><span class=p>)</span>
</span></span></code></pre></div><pre><code>p-value: 0.0025994777679443364 , Statistically Significant: True
</code></pre><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;retention&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=n>rt_exp</span><span class=o>=</span><span class=p>[</span><span class=n>i</span><span class=o>/</span><span class=n>j</span> <span class=k>for</span> <span class=n>i</span><span class=p>,</span><span class=n>j</span> <span class=ow>in</span> <span class=nb>zip</span><span class=p>(</span><span class=n>payment_exp</span><span class=p>,</span><span class=n>enrolls_exp</span><span class=p>)]</span>
</span></span><span class=line><span class=cl><span class=n>rt_cont</span><span class=o>=</span><span class=p>[</span><span class=n>i</span><span class=o>/</span><span class=n>j</span> <span class=k>for</span> <span class=n>i</span><span class=p>,</span><span class=n>j</span> <span class=ow>in</span> <span class=nb>zip</span><span class=p>(</span><span class=n>payment_cont</span><span class=p>,</span><span class=n>enrolls_cont</span><span class=p>)]</span>
</span></span><span class=line><span class=cl><span class=n>rt_diff</span><span class=o>=</span><span class=nb>sum</span><span class=p>([</span><span class=n>i</span><span class=o>&gt;</span><span class=n>j</span> <span class=k>for</span> <span class=n>i</span><span class=p>,</span><span class=n>j</span> <span class=ow>in</span> <span class=nb>zip</span><span class=p>(</span><span class=n>rt_exp</span><span class=p>,</span><span class=n>rt_cont</span><span class=p>)])</span>
</span></span><span class=line><span class=cl><span class=n>days</span><span class=o>=</span><span class=nb>len</span><span class=p>(</span><span class=n>rt_exp</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>p_value</span><span class=o>=</span><span class=n>binom_test</span><span class=p>(</span><span class=n>rt_diff</span><span class=p>,</span> <span class=n>n</span><span class=o>=</span><span class=n>days</span><span class=p>,</span> <span class=n>p</span><span class=o>=</span><span class=mf>0.5</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;p-value:&#34;</span><span class=p>,</span><span class=n>p_value</span><span class=p>,</span><span class=s2>&#34;, Statistically Significant:&#34;</span><span class=p>,</span><span class=n>p_value</span><span class=o>&lt;</span><span class=n>alpha</span><span class=p>)</span>
</span></span></code></pre></div><pre><code>p-value: 0.6776394844055175 , Statistically Significant: False
</code></pre><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nb>len</span><span class=p>(</span><span class=n>gc_exp</span><span class=p>)</span>
</span></span></code></pre></div><pre><code>23
</code></pre><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;net conversion&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=n>nc_exp</span><span class=o>=</span><span class=p>[</span><span class=n>i</span><span class=o>/</span><span class=n>j</span> <span class=k>for</span> <span class=n>i</span><span class=p>,</span><span class=n>j</span> <span class=ow>in</span> <span class=nb>zip</span><span class=p>(</span><span class=n>payment_exp</span><span class=p>,</span><span class=n>clicks_exp</span><span class=p>)]</span>
</span></span><span class=line><span class=cl><span class=n>nc_cont</span><span class=o>=</span><span class=p>[</span><span class=n>i</span><span class=o>/</span><span class=n>j</span> <span class=k>for</span> <span class=n>i</span><span class=p>,</span><span class=n>j</span> <span class=ow>in</span> <span class=nb>zip</span><span class=p>(</span><span class=n>payment_cont</span><span class=p>,</span><span class=n>clicks_cont</span><span class=p>)]</span>
</span></span><span class=line><span class=cl><span class=n>nc_diff</span><span class=o>=</span><span class=nb>sum</span><span class=p>([</span><span class=n>i</span><span class=o>&gt;</span><span class=n>j</span> <span class=k>for</span> <span class=n>i</span><span class=p>,</span><span class=n>j</span> <span class=ow>in</span> <span class=nb>zip</span><span class=p>(</span><span class=n>nc_exp</span><span class=p>,</span><span class=n>nc_cont</span><span class=p>)])</span>
</span></span><span class=line><span class=cl><span class=n>days</span><span class=o>=</span><span class=nb>len</span><span class=p>(</span><span class=n>nc_exp</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>p_value</span><span class=o>=</span><span class=n>binom_test</span><span class=p>(</span><span class=n>nc_diff</span><span class=p>,</span> <span class=n>n</span><span class=o>=</span><span class=n>days</span><span class=p>,</span> <span class=n>p</span><span class=o>=</span><span class=mf>0.5</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;p-value:&#34;</span><span class=p>,</span><span class=n>p_value</span><span class=p>,</span><span class=s2>&#34;, Statistically Significant:&#34;</span><span class=p>,</span><span class=n>p_value</span><span class=o>&lt;</span><span class=n>alpha</span><span class=p>)</span>
</span></span></code></pre></div><pre><code>p-value: 0.6776394844055175 , Statistically Significant: False
</code></pre><blockquote><p>Recomendation: not to launch</p></blockquote></div><footer class=post-footer><ul class=post-tags><li><a href=https://nancyyanyu.github.io/tags/ab-testing/>ab-testing</a></li></ul><nav class=paginav><a class=prev href=https://nancyyanyu.github.io/posts/paper-bert/><span class=title>« Prev</span><br><span>Paper Note: BERT</span></a>
<a class=next href=https://nancyyanyu.github.io/posts/ab_testing_udacity/><span class=title>Next »</span><br><span>Study Notes of Udacity A/B Testing</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share A/B Testing Final Project on twitter" href="https://twitter.com/intent/tweet/?text=A%2fB%20Testing%20Final%20Project&amp;url=https%3a%2f%2fnancyyanyu.github.io%2fposts%2fab_testing_final_project%2f&amp;hashtags=ab-testing"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share A/B Testing Final Project on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fnancyyanyu.github.io%2fposts%2fab_testing_final_project%2f&amp;title=A%2fB%20Testing%20Final%20Project&amp;summary=A%2fB%20Testing%20Final%20Project&amp;source=https%3a%2f%2fnancyyanyu.github.io%2fposts%2fab_testing_final_project%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share A/B Testing Final Project on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fnancyyanyu.github.io%2fposts%2fab_testing_final_project%2f&title=A%2fB%20Testing%20Final%20Project"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share A/B Testing Final Project on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fnancyyanyu.github.io%2fposts%2fab_testing_final_project%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share A/B Testing Final Project on whatsapp" href="https://api.whatsapp.com/send?text=A%2fB%20Testing%20Final%20Project%20-%20https%3a%2f%2fnancyyanyu.github.io%2fposts%2fab_testing_final_project%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share A/B Testing Final Project on telegram" href="https://telegram.me/share/url?text=A%2fB%20Testing%20Final%20Project&amp;url=https%3a%2f%2fnancyyanyu.github.io%2fposts%2fab_testing_final_project%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share A/B Testing Final Project on ycombinator" href="https://news.ycombinator.com/submitlink?t=A%2fB%20Testing%20Final%20Project&u=https%3a%2f%2fnancyyanyu.github.io%2fposts%2fab_testing_final_project%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://nancyyanyu.github.io/>Nancy's Notebook</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>